---
import CardOfHacking from '@components/CardOfHacking.astro'
import Layout from '@layouts/Layout.astro'
import { getCollection, getEntryBySlug } from 'astro:content'

export async function getStaticPaths () {
	const collection = await getCollection('hacking')

	return collection.map(item => {
		const [res] = item.slug.split('/')
		return {
			params: {
				resource: res
			}
		}
	})
}

const { target } = Astro.params
/* const entry = await getEntryBySlug('hacking', 'late') */
const entry = await getCollection('hacking')
console.log({entry})
---

<Layout title={target}>
	<ul class='px-0 mx-0'>
		{
			entry.map(({ slug, data }) => {
				return <CardOfHacking
					slug={slug}
					pubDate={new Date()}
					title={data.title}
					description={data.description}
				/>
			})
		}
	</ul>
</Layout>
